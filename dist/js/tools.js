"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}function mySetVc(){for(var t="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXUZ",e="",i=1;i<=6;i++){var n=parseInt(Math.random()*t.length);-1===e.indexOf(t[n])?e+=t[n]:i--}return e}function getUrlVal(){var t=decodeURI(window.location.search).substr(1),i={};return t.split("&").forEach(function(t){var e=t.split("=");i[e[0]]=e[1]}),i}function mySetTable(t,e){var n="";t.forEach(function(t,e){for(var i in n+="<tr>",t)n+="<td>".concat(t[i],"</td>");n+='<td><button index="'.concat(e,'">删除</button></td>'),n+="</tr>"}),e.innerHTML=n,mySetButton(document.querySelectorAll("button"),t,e)}function mySetButton(t,i,n){t.forEach(function(e){e.onclick=function(){var t;window.confirm("确定,是否删除")&&(t=e.getAttribute("index"),i.splice(t,1),mySetTable(i,n))}})}function myAddEvent(t,e,i){t.addEventListener?t.addEventListener(e,i):t.attachEvent("on"+e,i)}function myGetStyle(t,e){return window.getComputedStyle?window.getComputedStyle(t)[e]:t.currentStyle[e]}function mySetCookie(t,e,i){var n=new Date,o=n.getTime()-288e5+1e3*i;n.setTime(o);var l=void 0===i?"":n;document.cookie="".concat(t,"=").concat(e,";expires=").concat(l,";path=/")}function myGetCookie(){var i={};return document.cookie.split("; ").forEach(function(t){var e=t.split("=");i[e[0]]=e[1]}),i}var Loop=function(){function e(t){_classCallCheck(this,e),this.ele=t,this.oUl=this.ele.querySelector("#img"),this.oUlLis=this.ele.querySelectorAll("ul>li"),this.oOl=document.getElementById("focus"),this.liWidth=this.oUlLis[0].offsetWidth,this.index=1,this.time,this.bool=!0}return _createClass(e,[{key:"init",value:function(){this.setFocus(),this.cloneLi(),this.autoLoop(),this.inOut(),this.setFocusClick(),this.setLeftRight(),this.hid()}},{key:"setFocus",value:function(){var i="";this.oUlLis.forEach(function(t,e){i+=0===e?"<li class='active' index ='".concat(e+1,"' ></li>"):"<li index =".concat(e+1," ></li>")}),this.oOl.innerHTML=i}},{key:"cloneLi",value:function(){var t=this.oUlLis[0].cloneNode(!0),e=this.oUlLis[this.oUlLis.length-1].cloneNode(!0);this.oUl.insertBefore(e,this.oUlLis[0]),this.oUl.appendChild(t),this.oUl.style.width=(this.oUlLis.length+2)*this.liWidth+"px",this.oUl.style.left=-this.liWidth+"px"}},{key:"autoLoop",value:function(){var t=this;this.time=setInterval(function(){t.index++,t.setFocusStyle(),move(t.oUl,{left:-t.index*t.liWidth},function(){t.loopEnd()})},3e3)}},{key:"loopEnd",value:function(){this.setFocusStyle(),this.index===this.oUlLis.length+1&&(this.index=1,this.oUl.style.left=-this.liWidth+"px"),0===this.index&&(this.index=this.oUlLis.length,this.oUl.style.left=-this.oUlLis.length*this.liWidth+"px"),this.bool=!0}},{key:"inOut",value:function(){var e=this;this.ele.addEventListener("mouseenter",function(t){clearInterval(e.time)}),this.ele.addEventListener("mouseleave",function(t){e.autoLoop()})}},{key:"setFocusStyle",value:function(){var i=this;this.ele.querySelectorAll("ol>li").forEach(function(t,e){t.className="",i.index==t.getAttribute("index")&&(t.className="active")})}},{key:"setFocusClick",value:function(){var e=this;this.oOl.addEventListener("click",function(t){"LI"===(t=t||window.event).target.tagName&&e.bool&&(e.bool=!1,e.index=parseInt(t.target.getAttribute("index")),e.setFocusStyle(),move(e.oUl,{left:-e.index*e.liWidth},function(){e.loopEnd()}))})}},{key:"setLeftRight",value:function(){var e=this;this.ele.addEventListener("click",function(t){t=t||window.event,!0===e.bool&&(e.bool=!1,"left"===t.target.name&&(e.index--,move(e.oUl,{left:-e.index*e.liWidth},function(){e.loopEnd()})),"right"===t.target.name&&(e.index++,move(e.oUl,{left:-e.index*e.liWidth},function(){e.loopEnd()})))})}},{key:"hid",value:function(){var t=this;document.addEventListener("visibilitychange",function(){"hidden"===document.visibilityState&&clearInterval(t.time),"visible"===document.visibilityState&&t.autoLoop()})}}]),e}();function move(n,o,l){var s={};for(var t in o)!function(i){s[i]=setInterval(function(){var t="opacity"===i?100*getStyle(n,i):parseInt(getStyle(n,i)),e="opacity"===i?(100*o[i]-t)/5:(o[i]-t)/5;t+=e=0<e?Math.ceil(e):Math.floor(e),n.style[i]="opacity"===i?t/100:t+"px","opacity"===i?t/100===o[i]&&(clearInterval(s[i]),delete s[i]):t===o[i]&&(clearInterval(s[i]),delete s[i]),0===Object.keys(s).length&&l()},80)}(t)}function getStyle(t,e){return window.getComputedStyle?window.getComputedStyle(t)[e]:t.getCurrentStyle(t)}